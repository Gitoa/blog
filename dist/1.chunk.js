(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[,,,function(t,e,n){"use strict";n.r(e);var o=n(4),s=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);e.default=s.a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(20),a=(o=s)&&o.__esModule?o:{default:o};e.default={data:function(){return{blog:{},comments:[],comment:"",words:100,warn:""}},methods:{getArticle:function(){var t=this,e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState){var n=e.status;if(n>=200&&n<300||304==n){var o=JSON.parse(e.responseText);console.log(o),t.blog=o}}},e.open("GET","/article_info/"+t.$route.params.id,!0),e.send(null)},getComments:function(){var t=this,e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState){var n=e.status;n<300&&n>=200||304==n?(t.comments=JSON.parse(e.responseText),console.log(t.comments)):console.log("failed")}},console.log(t.article_id),e.open("GET","/comments/"+t.$route.params.id,!0),e.send(null)},sendcomment:function(){if(this.$store.state.login){var t=this,e="/comment/"+t.$route.params.id;if(t.words<0)alert("字数过多");else if(100!=t.words){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState){var e=n.status;if(e<300&&e>=200||304==e){console.log("send success");var o=JSON.parse(n.responseText);console.log(o),t.getComments(),t.comment="",t.blog.comments++}else console.log("send failed")}};var o=new Date,s=o.getFullYear(),i=o.getMonth()+1;i=i<10?"0"+i:i;var r=o.getDate(),c=s+"-"+i+"-"+(r=r<10?"0"+r:r);console.log(c);var l={id:t.blog.id+"_"+(t.comments.length+1),article_id:t.blog.id,user_id:"gg",content:t.comment,time:c,to_user:"mm"};n.open("POST",e,!0),n.setRequestHeader("Content-Type","application/json"),n.send((0,a.default)(l))}else alert("评论不能为空")}else alert("请先登录")},clear:function(){this.comment=""}},watch:{comment:function(t){this.words=100-t.length,this.words<0?this.warn="tooMany":this.warn=""}},mounted:function(){this.getArticle(),this.getComments()}}},function(t,e){},,,,,,,,,,,function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article"},[n("div",{staticClass:"title"},[n("h2",[t._v(t._s(t.blog.title))])]),t._v(" "),n("div",{staticClass:"info"},[n("span",[t._v("view:"+t._s(t.blog.view))]),n("span",[t._v("comment:"+t._s(t.blog.comments))]),n("span",[t._v(t._s(t.blog.time))])]),t._v(" "),n("p",{staticClass:"content"},[t._v(t._s(t.blog.content))]),t._v(" "),n("div",{staticClass:"comment"},[n("div",{class:"wordCount "+t.warn},[t._v("("+t._s(t.words)+"/100)")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],attrs:{placeholder:"发个友善的评论交流下 (=・ω・=)"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}}),t._v(" "),n("button",{on:{click:t.sendcomment}},[t._v("评论")]),n("button",{on:{click:t.clear}},[t._v("清空")])]),t._v(" "),n("div",{staticClass:"comment-zone"},t._l(t.comments,function(e){return n("div",{staticClass:"comment_item"},[n("p",[t._v(t._s(e.user_id)+": "+t._s(e.content))])])}),0)])},s=[];o._withStripped=!0,n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s})},,,,function(t,e,n){t.exports={default:n(22),__esModule:!0}},,function(t,e,n){var o=n(23),s=o.JSON||(o.JSON={stringify:JSON.stringify});t.exports=function(t){return s.stringify.apply(s,arguments)}},function(t,e){var n=t.exports={version:"2.6.5"};"number"==typeof __e&&(__e=n)},function(t,e,n){"use strict";var o=n(5);n.n(o).a},,,function(t,e,n){"use strict";n.r(e);var o=n(16),s=n(3);for(var a in s)"default"!==a&&function(t){n.d(e,t,function(){return s[t]})}(a);n(24);var i=n(0),r=Object(i.a)(s.default,o.a,o.b,!1,null,"43077537",null);r.options.__file="views/article.vue",e.default=r.exports}]]);